import { useEffect } from "react";

const Loader = () => {
  const offSetElementStroke = (el, totalLength) => {
		el.style.strokeDasharray = `${totalLength}`;
		el.style.strokeDashoffset = `${totalLength}`;
  };
  
  const animateElement = (el, delay) => {
    el.classList.add("animate-line");
    el.style.animationDelay = `${delay}s`
  }

  useEffect(() => {
    const logo = document.querySelector("#loader");
    const paths = [...logo.querySelectorAll("path")];
    let delay = 0.2;
    
    for (let i = 0; i < paths.length; i++) {
      offSetElementStroke(paths[i], Math.floor(paths[i].getTotalLength()));
      animateElement(paths[i], delay);
      delay += 0.2;
    }
  }, []);

	return (
		<div className='loader-container'>
			<h1 className='loader'>
				<svg
					width='476'
					height='141'
					viewBox='0 0 476 141'
					fill='none'
					xmlns='http://www.w3.org/2000/svg'
					id='loader'
					className='loader-svg'
				>
					<path
						d='M103.696 15.144V105H81.808V51.112L61.712 105H44.048L23.824 50.984V105H1.936V15.144H27.792L53.008 77.352L77.968 15.144H103.696Z'
						stroke='#212121'
						strokeWidth='3'
					/>
					<path
						d='M130.444 26.152C126.604 26.152 123.447 25.0427 120.972 22.824C118.583 20.52 117.388 17.704 117.388 14.376C117.388 10.9627 118.583 8.14666 120.972 5.92799C123.447 3.62399 126.604 2.47199 130.444 2.47199C134.199 2.47199 137.271 3.62399 139.66 5.92799C142.135 8.14666 143.372 10.9627 143.372 14.376C143.372 17.704 142.135 20.52 139.66 22.824C137.271 25.0427 134.199 26.152 130.444 26.152ZM141.324 33.576V105H119.436V33.576H141.324Z'
						stroke='#212121'
						strokeWidth='3'
					/>
					<path
						d='M152.834 69.288C152.834 61.864 154.327 55.3787 157.314 49.832C160.386 44.2853 164.61 40.0187 169.986 37.032C175.447 34.0453 181.677 32.552 188.674 32.552C197.634 32.552 205.101 34.8987 211.074 39.592C217.133 44.2853 221.101 50.8987 222.978 59.432H199.682C197.719 53.9707 193.922 51.24 188.29 51.24C184.279 51.24 181.079 52.8187 178.69 55.976C176.301 59.048 175.106 63.4853 175.106 69.288C175.106 75.0907 176.301 79.5707 178.69 82.728C181.079 85.8 184.279 87.336 188.29 87.336C193.922 87.336 197.719 84.6053 199.682 79.144H222.978C221.101 87.5067 217.133 94.0773 211.074 98.856C205.015 103.635 197.549 106.024 188.674 106.024C181.677 106.024 175.447 104.531 169.986 101.544C164.61 98.5573 160.386 94.2907 157.314 88.744C154.327 83.1973 152.834 76.712 152.834 69.288Z'
						stroke='#212121'
						strokeWidth='3'
					/>
					<path
						d='M278.59 32.808C286.782 32.808 293.353 35.5387 298.302 41C303.251 46.376 305.726 53.8 305.726 63.272V105H283.966V66.216C283.966 61.4373 282.729 57.7253 280.254 55.08C277.779 52.4347 274.451 51.112 270.27 51.112C266.089 51.112 262.761 52.4347 260.286 55.08C257.811 57.7253 256.574 61.4373 256.574 66.216V105H234.686V10.28H256.574V43.176C258.793 40.0187 261.822 37.5013 265.662 35.624C269.502 33.7467 273.811 32.808 278.59 32.808Z'
						stroke='#212121'
						strokeWidth='3'
					/>
					<path
						d='M364.584 105L342.824 75.048V105H320.936V10.28H342.824V62.632L364.456 33.576H391.464L361.768 69.416L391.72 105H364.584Z'
						stroke='#212121'
						strokeWidth='3'
					/>
					<path
						d='M473.021 33.576L428.221 138.92H404.669L421.053 102.568L391.997 33.576H416.445L432.957 78.248L449.341 33.576H473.021Z'
						stroke='#212121'
						strokeWidth='3'
					/>
				</svg>
			</h1>
		</div>
	);
};

export default Loader;
